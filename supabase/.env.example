# Supabase Edge Function environment template
# Copy these into the Supabase project dashboard (Project Settings -> API -> Functions)

# Core connectivity
SUPABASE_URL=https://<project-ref>.supabase.co
SUPABASE_SERVICE_ROLE_KEY=<service-role-key>

# Shared secrets (must match the Next.js runtime)
HMAC_SHARED_SECRET=<same-as-web-runtime>
KMS_DATA_KEY_BASE64=<32-byte-base64-secret>
# Optional legacy alias if you keep the key under FIELD_ENCRYPTION_KEY
# FIELD_ENCRYPTION_KEY=<32-byte-base64-secret>

# Observability
SENTRY_DSN_SUPABASE=https://public@sentry.example/1
SENTRY_TRACES_SAMPLE_RATE=0.2
SENTRY_PROFILES_SAMPLE_RATE=0.1
POSTHOG_API_KEY=phc_your_posthog_key
POSTHOG_HOST=https://app.posthog.com

# Outbound email (Resend) for MFA codes
RESEND_API_KEY=<resend-api-key>
MFA_EMAIL_FROM=security@example.com
MFA_EMAIL_LOCALE=en

# WhatsApp Business API (Meta direct integration)
META_WHATSAPP_ACCESS_TOKEN=<meta-access-token>
META_WHATSAPP_PHONE_NUMBER_ID=<phone-number-id>
META_WHATSAPP_BUSINESS_ACCOUNT_ID=<business-account-id>

# Optional automation token for elevated admin operations
# ADMIN_API_TOKEN=

# Allowed origin for CORS-enabled functions (exports, reconciliation)
APP_ORIGIN=https://app.example.com

# AI configuration for SMS/analytics helpers
OPENAI_API_KEY=<openai-api-key>
OPENAI_RESPONSES_MODEL=gpt-4.1-mini

# Forecasting + reconciliation knobs
FORECAST_LOOKBACK_DAYS=120
FORECAST_HORIZON_DAYS=21
RATE_LIMIT_WINDOW_SECONDS=60
RATE_LIMIT_MAX=120
RECON_AUTO_ESCALATE_HOURS=48

# SMS automation guardrails
SMS_AUTOMATION_THRESHOLD_MINUTES=10
SMS_AUTOMATION_BATCH=25

# Structured report signing (must match the Next.js runtime when enabled)
# REPORT_SIGNING_KEY=
